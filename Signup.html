
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Health AI Advisor - Sign Up</title>
  <link rel="stylesheet" href="style-2.css">
</head>
<body>

  <div class="page-container">
    <div class="half-page-bg">
      <img src="VectorArt.png" style="width: 100%; height: auto; max-height: 90vh; object-fit: contain;" alt="Health AI Illustration">
    </div>

    <div class="other-half">
      <header>
        <h1>üè• Welcome To Health AI Advisor</h1>
        <p style="color: #666; font-size: 1.1rem; margin-top: 10px;">Your personal AI-powered health companion</p>
      </header>

      <div class="signup-form">
        <h2>üöÄ Create Your Account</h2>
        
        <!-- Success message -->
        <div id="successMessage" style="display: none; background: linear-gradient(135deg, #d4edda, #c3e6cb); border: 1px solid #c3e6cb; color: #155724; padding: 15px; border-radius: 8px; margin-bottom: 20px; text-align: center; font-weight: 600;">
          ‚úÖ Account created successfully! Redirecting to login...
        </div>

        <!-- Error message -->
        <div id="errorMessage" style="display: none; background: linear-gradient(135deg, #f8d7da, #f5c6cb); border: 1px solid #f5c6cb; color: #721c24; padding: 15px; border-radius: 8px; margin-bottom: 20px; text-align: center;">
          <span id="errorText"></span>
        </div>

        <form id="signupForm" action="/signup" method="POST">
          <div class="input-group">
            <input type="text" id="firstName" name="firstName" placeholder="üë§ First Name" required />
            <span class="error-text" id="firstNameError"></span>
          </div>

          <div class="input-group">
            <input type="text" id="lastName" name="lastName" placeholder="üë§ Last Name" required />
            <span class="error-text" id="lastNameError"></span>
          </div>

          <div class="input-group">
            <input type="email" id="email" name="email" placeholder="üìß Email Address" required />
            <span class="error-text" id="emailError"></span>
          </div>

          <div class="input-group">
            <input type="password" id="password" name="password" placeholder="üîí Password" required />
            <div class="password-strength" id="passwordStrength"></div>
            <span class="error-text" id="passwordError"></span>
          </div>

          <div class="input-group">
            <input type="password" id="confirmPassword" name="confirm_password" placeholder="üîí Confirm Password" required />
            <span class="error-text" id="confirmPasswordError"></span>
          </div>

          <div class="input-group">
            <select id="ageRange" name="ageRange" required>
              <option value="">üéÇ Select Age Range</option>
              <option value="18-25">18-25 years</option>
              <option value="26-35">26-35 years</option>
              <option value="36-45">36-45 years</option>
              <option value="46-55">46-55 years</option>
              <option value="56-65">56-65 years</option>
              <option value="65+">65+ years</option>
            </select>
            <span class="error-text" id="ageRangeError"></span>
          </div>

          <div class="checkbox-group">
            <label>
              <input type="checkbox" id="terms" name="terms" required />
              <span class="checkmark"></span>
              I agree to the <a href="#" style="color: #2a7a2a; text-decoration: underline;">Terms of Service</a> and <a href="#" style="color: #2a7a2a; text-decoration: underline;">Privacy Policy</a>
            </label>
            <span class="error-text" id="termsError"></span>
          </div>

          <div class="checkbox-group">
            <label>
              <input type="checkbox" id="newsletter" name="newsletter" />
              <span class="checkmark"></span>
              üìß Subscribe to health tips and updates
            </label>
          </div>

          <button type="submit" id="submitBtn">
            <span id="btnText">üöÄ Create Account</span>
            <span id="btnLoader" style="display: none;">‚è≥ Creating Account...</span>
          </button>

          <div style="text-align: center; margin-top: 20px; padding-top: 20px; border-top: 1px solid #eee;">
            <p>Already have an account? <a href="index.html" style="color: #2a7a2a; text-decoration: underline; font-weight: 600;">Sign In</a></p>
          </div>
        </form>
      </div>
    </div>
  </div>

  <footer>
    &copy; 2025 Phillip Chou
  </footer>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const form = document.getElementById('signupForm');
      const submitBtn = document.getElementById('submitBtn');
      const btnText = document.getElementById('btnText');
      const btnLoader = document.getElementById('btnLoader');

      // Password strength checker
      const passwordInput = document.getElementById('password');
      const strengthIndicator = document.getElementById('passwordStrength');

      passwordInput.addEventListener('input', function() {
        const password = this.value;
        const strength = checkPasswordStrength(password);
        updateStrengthIndicator(strength);
      });

      function checkPasswordStrength(password) {
        let score = 0;
        if (password.length >= 8) score++;
        if (/[a-z]/.test(password)) score++;
        if (/[A-Z]/.test(password)) score++;
        if (/[0-9]/.test(password)) score++;
        if (/[^a-zA-Z0-9]/.test(password)) score++;
        return score;
      }

      function updateStrengthIndicator(strength) {
        const labels = ['Very Weak', 'Weak', 'Fair', 'Good', 'Strong'];
        const colors = ['#dc3545', '#fd7e14', '#ffc107', '#20c997', '#28a745'];
        
        if (strength > 0) {
          strengthIndicator.style.display = 'block';
          strengthIndicator.innerHTML = `
            <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 5px;">
              <span style="font-size: 0.8rem; color: ${colors[strength - 1]};">${labels[strength - 1]}</span>
              <div style="width: 60%; height: 4px; background: #eee; border-radius: 2px; overflow: hidden;">
                <div style="width: ${strength * 20}%; height: 100%; background: ${colors[strength - 1]}; transition: all 0.3s ease;"></div>
              </div>
            </div>
          `;
        } else {
          strengthIndicator.style.display = 'none';
        }
      }

      // Form validation and submission
      form.addEventListener('submit', async function(e) {
        e.preventDefault();
        
        if (validateForm()) {
          // Show loading state
          submitBtn.disabled = true;
          btnText.style.display = 'none';
          btnLoader.style.display = 'inline';
          
          try {
            const formData = new FormData(form);
            const data = Object.fromEntries(formData.entries());
            
            const response = await fetch('/signup', {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json',
              },
              body: JSON.stringify(data)
            });

            const result = await response.json();
            
            if (result.success) {
              // Save to localStorage (demo purposes)
              const users = JSON.parse(localStorage.getItem('users') || '{}');
              users[data.email] = { password: data.password };
              localStorage.setItem('users', JSON.stringify(users));
              
              showSuccess();
              // Redirect after success
              setTimeout(() => {
                window.location.href = 'index.html';
              }, 2000);
            } else {
              showErrorMessage(result.error || 'Signup failed. Please try again.');
            }
          } catch (error) {
            console.error('Signup error:', error);
            showErrorMessage('Network error. Please try again.');
          } finally {
            // Reset button state
            submitBtn.disabled = false;
            btnText.style.display = 'inline';
            btnLoader.style.display = 'none';
          }
        }
      });

      function validateForm() {
        let isValid = true;
        clearErrors();

        const firstName = document.getElementById('firstName').value.trim();
        const lastName = document.getElementById('lastName').value.trim();
        const email = document.getElementById('email').value.trim();
        const password = document.getElementById('password').value;
        const confirmPassword = document.getElementById('confirmPassword').value;
        const ageRange = document.getElementById('ageRange').value;
        const terms = document.getElementById('terms').checked;

        if (!firstName) {
          showFieldError('firstNameError', 'First name is required');
          isValid = false;
        }

        if (!lastName) {
          showFieldError('lastNameError', 'Last name is required');
          isValid = false;
        }

        if (!email) {
          showFieldError('emailError', 'Email is required');
          isValid = false;
        } else if (!isValidEmail(email)) {
          showFieldError('emailError', 'Please enter a valid email address');
          isValid = false;
        }

        if (!password) {
          showFieldError('passwordError', 'Password is required');
          isValid = false;
        } else if (password.length < 8) {
          showFieldError('passwordError', 'Password must be at least 8 characters long');
          isValid = false;
        }

        if (!confirmPassword) {
          showFieldError('confirmPasswordError', 'Please confirm your password');
          isValid = false;
        } else if (password !== confirmPassword) {
          showFieldError('confirmPasswordError', 'Passwords do not match');
          isValid = false;
        }

        if (!ageRange) {
          showFieldError('ageRangeError', 'Please select your age range');
          isValid = false;
        }

        if (!terms) {
          showFieldError('termsError', 'You must agree to the terms and conditions');
          isValid = false;
        }

        return isValid;
      }

      function showFieldError(elementId, message) {
        const errorElement = document.getElementById(elementId);
        if (errorElement) {
          errorElement.textContent = message;
          errorElement.style.display = 'block';
        }
      }

      function clearErrors() {
        const errorElements = document.querySelectorAll('.error-text');
        errorElements.forEach(element => {
          element.style.display = 'none';
          element.textContent = '';
        });
        hideMessage('errorMessage');
      }

      function isValidEmail(email) {
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        return emailRegex.test(email);
      }

      function showSuccess() {
        document.getElementById('successMessage').style.display = 'block';
        form.style.opacity = '0.7';
      }

      function showErrorMessage(message) {
        const errorDiv = document.getElementById('errorMessage');
        const errorText = document.getElementById('errorText');
        errorText.textContent = message;
        errorDiv.style.display = 'block';
      }

      function hideMessage(messageId) {
        document.getElementById(messageId).style.display = 'none';
      }
    });
  </script>
</body>
</html>
